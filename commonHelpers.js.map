{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  textInput: document.querySelector('#query'),\n  searchBtn: document.querySelector('.search-button'),\n  galleryList: document.querySelector('.gallery-list'),\n  loadingStatus: document.querySelector('.loading'),\n};\n\n//options for simplelightbox\nconst simplelightboxOptions = {\n  captions: true,\n  captionDelay: 250,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionClass: '',\n  captionHTML: true,\n};\n\nrefs.form.addEventListener('submit', onSearch);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  const searchText = e.currentTarget.elements.query.value;\n  const searchParams = new URLSearchParams({\n    key: '42031589-0742425241f8784341d5a922f',\n    q: searchText,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  refs.loadingStatus.classList.remove('is-hidden');\n  try {\n    fetch(`https://pixabay.com/api/?${searchParams}`)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.status);\n        }\n        return response.json();\n      })\n      .then(data => {\n        console.log(data.hits);\n        refs.galleryList.innerHTML = createMarkup(data.hits);\n\n        //initializing simplelightbox\n        const gallery = new SimpleLightbox(\n          '.gallery-list a',\n          simplelightboxOptions\n        );\n      })\n      .catch(error => {\n        // Error handling\n        console.log(error);\n      });\n  } catch {\n    console.log('error');\n  }\n}\n\nfunction createMarkup(photoList) {\n  //creating markup\n  return photoList\n    .map(photo => {\n      return `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${photo.largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${photo.webformatURL}\"\n            data-source=\"${photo.largeImageURL}\"\n            alt=\"${photo.tags}\"\n          />\n        </a>\n      </li>\n      `;\n    })\n    .join('\\n');\n}\n"],"names":["refs","simplelightboxOptions","onSearch","e","searchText","searchParams","response","data","createMarkup","gallery","SimpleLightbox","error","photoList","photo"],"mappings":"svBAGA,MAAMA,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,UAAW,SAAS,cAAc,QAAQ,EAC1C,UAAW,SAAS,cAAc,gBAAgB,EAClD,YAAa,SAAS,cAAc,eAAe,EACnD,cAAe,SAAS,cAAc,UAAU,CAClD,EAGMC,EAAwB,CAC5B,SAAU,GACV,aAAc,IACd,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,aAAc,GACd,YAAa,EACf,EAEAD,EAAK,KAAK,iBAAiB,SAAUE,CAAQ,EAE7C,SAASA,EAASC,EAAG,CACnBA,EAAE,eAAc,EAEhB,MAAMC,EAAaD,EAAE,cAAc,SAAS,MAAM,MAC5CE,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EACDJ,EAAK,cAAc,UAAU,OAAO,WAAW,EAC/C,GAAI,CACF,MAAM,4BAA4BK,CAAY,EAAE,EAC7C,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACxB,CAAO,EACA,KAAKC,GAAQ,CACZ,QAAQ,IAAIA,EAAK,IAAI,EACrBP,EAAK,YAAY,UAAYQ,EAAaD,EAAK,IAAI,EAGnD,MAAME,EAAU,IAAIC,EAClB,kBACAT,CACV,CACA,CAAO,EACA,MAAMU,GAAS,CAEd,QAAQ,IAAIA,CAAK,CACzB,CAAO,CACP,MAAU,CACN,QAAQ,IAAI,OAAO,CACpB,CACH,CAEA,SAASH,EAAaI,EAAW,CAE/B,OAAOA,EACJ,IAAIC,GACI;AAAA;AAAA,wCAE2BA,EAAM,aAAa;AAAA;AAAA;AAAA,mBAGxCA,EAAM,YAAY;AAAA,2BACVA,EAAM,aAAa;AAAA,mBAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,OAKxB,EACA,KAAK;AAAA,CAAI,CACd"}